@using OA.Web.Models
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Index</title>
    <link href="~/Content/Iview/iview.css" rel="stylesheet" />
    <script src="~/Scripts/vue.js"></script>
    <script src="~/Scripts/IView/iview.js"></script>
    <script src="~/Scripts/vue-resource.js"></script>
</head>
<body>
    <style scoped>
        .layout {
            border: 1px solid #d7dde4;
            background: #f5f7f9;
            position: relative;
            border-radius: 4px;
            overflow: hidden;
        }

        .layout-header-bar {
            background: #fff;
            box-shadow: 0 1px 1px rgba(0,0,0,.1);
        }
    </style>
    <div id="app">
        <div class="layout">
            <Sider :style="{position: 'fixed', height: '100vh', left: 0, overflow: 'auto'}">
                <i-Menu active-name="1-2" theme="dark" width="auto" :open-names="['1']">
                    <Submenu style="background-color:coral" name="4">
                        <template slot="title">
                            <Avatar style="color: #f56a00;background-color: #fde3cf">{{lastName}}</Avatar>
                            <span style="color:black;font-size:18px;font-style:initial">&nbsp&nbsp{{ui.UName}}</span>
                        </template>
                        <Menu-Item name="4-1" style="font-size:12px;background-color:chocolate">个人信息</Menu-Item>
                        <Menu-Item name="4-2" style="font-size:12px;background-color:chocolate">退出登陆</Menu-Item>
                    </Submenu>
                    <Submenu name="1">
                        <template slot="title">
                            <Icon type="ios-navigate"></Icon>
                            span
                        </template>
                        <Menu-Item name="1-1">Option 1</Menu-Item>
                        <Menu-Item name="1-2">Option 2</Menu-Item>
                        <Menu-Item name="1-3">Option 3</Menu-Item>
                    </Submenu>
                    <Submenu name="2">
                        <template slot="title">
                            <Icon type="ios-keypad"></Icon>
                            Item 2
                        </template>
                        <Menu-Item name="2-1">Option 1</Menu-Item>
                        <Menu-Item name="2-2">Option 2</Menu-Item>
                    </Submenu>
                    <Submenu name="3">
                        <template slot="title">
                            <Icon type="ios-analytics"></Icon>
                            Item 3
                        </template>
                        <Menu-Item name="3-1">Option 1</Menu-Item>
                        <Menu-Item name="3-2">Option 2</Menu-Item>
                    </Submenu>
                </i-Menu>
            </Sider>
            <Layout :style="{marginLeft: '200px'}">
                <Header :style="{background: '#fff', boxShadow: '0 2px 3px 2px rgba(0,0,0,.1)'}"></Header>
                <Content :style="{padding: '0 16px 16px'}">
                    <Breadcrumb :style="{margin: '16px 0'}">
                        <Breadcrumb-Item>Home</Breadcrumb-Item>
                        <Breadcrumb-Item>Components</Breadcrumb-Item>
                        <Breadcrumb-Item>Layout</Breadcrumb-Item>
                    </Breadcrumb>
                    <Card>
                        <div style="height: 600px"></div>
                    </Card>
                </Content>
            </Layout>
        </div>
    </div>
</body>
<script>
      var v=  new Vue({
            el:'#app',
            data:{
                user:"",
                ui:[],

            },
            computed:{
                lastName: function () {
                    var str = this.ui.UName;
                    if ("undefined" != typeof str) {
                        var n = str.split("");
                        return n[n.length - 1]
                    }
                }

            },
            methods: {
                getActiveUInfo: function () {
                    this.$http.post("/Home/ActiveUserInfo").then(response => {
                        this.ui = response.body.ui;
                    }, function () {
                        alert("请求失败");
                        })
                }
                
            },
            created: function () {
               this.getActiveUInfo();
            }
        })
</script>

</html>
